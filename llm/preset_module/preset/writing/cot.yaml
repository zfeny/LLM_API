# 思维链/CoT机制 - Chain of Thought Mechanism
# 用途：在生成前进行结构化思考，确保输出质量和逻辑一致性
# 推荐度：⭐⭐⭐⭐⭐

# === 简化版思维链（推荐用于一般场景） ===

- system: |
    <thinking_protocol>
    在生成正式回复前，请使用<thinking>标签进行思考：

    <thinking>
    1. 场景：${简要描述当前场景}
    2. 目标：${本次要达成什么}
    3. 风格：${选择的文风}
    4. 注意：${关键禁忌或约束}
    </thinking>

    然后再输出正式内容。
    </thinking_protocol>

# === 标准版思维链（用于复杂场景） ===

- system: |
    <cot_standard>
    在生成前，使用<thinking>标签完成以下思考：

    <thinking>
    【场景分析】
    - 当前场景：${描述}
    - 人物状态：${列举主要角色状态}
    - 环境要素：${关键环境信息}

    【目标规划】
    - 本次任务：${明确目标}
    - 预期效果：${期望达到的效果}
    - 字数要求：${如有}

    【创作策略】
    - 文风选择：${具体文风名称}
    - 节奏把控：${快/中/慢}
    - 重点聚焦：${本次重点}

    【约束检查】
    - 禁用词检查：${确认无禁用词}
    - 格式要求：${确认符合格式}
    - 角色一致性：${确认符合人设}
    </thinking>
    </cot_standard>

# === 中文结构化CoT（用于专业创作） ===

- system: |
    <cot_structured>
    使用<CoT>标签进行三阶段思考：

    <CoT>
    # CoT: ${文风名称}

    【阶段一：理解与分析】
    - Step 1: 场景定位 - ${当前处于什么场景}
    - Step 2: 核心矛盾 - ${主要冲突是什么}
    - Step 3: 角色动机 - ${角色想要什么}
    - Step 4: 氛围基调 - ${整体情感色调}

    【阶段二：创作规划】
    - Step 1: 情节节拍 - ${起承转合安排}
    - Step 2: 文风匹配 - ${选择合适的写作风格}
    - Step 3: 细节安排 - ${需要着重的细节}
    - Step 4: 对话设计 - ${对话的功能和风格}

    【阶段三：约束复核】
    - 是否满足字数要求：${是/否}
    - 是否符合角色人设：${是/否}
    - 是否避免了禁用词：${是/否}
    - 是否保持了叙事连贯：${是/否}
    </CoT>
    </cot_structured>

# === 极简CoT（用于快速生成） ===

- system: |
    <cot_minimal>
    快速思考格式：

    <thinking>
    [场景] ${一句话概括}
    [任务] ${一句话说明}
    [风格] ${文风标签}
    [检查] ${关键约束}
    </thinking>
    </cot_minimal>

# === 使用建议 ===

- system: |
    <usage_tips>
    CoT选择指南：

    1. 简单对话/日常场景 → 使用极简CoT
    2. 标准创作任务 → 使用简化版CoT
    3. 复杂剧情/多角色 → 使用标准版CoT
    4. 专业写作/严格要求 → 使用中文结构化CoT

    注意事项：
    - CoT会增加30-50% token消耗
    - 适合需要严格逻辑的场景
    - 可以根据需要自定义CoT结构
    - 思维链内容不会显示给用户（被折叠或隐藏）
    </usage_tips>
